#!/bin/bash
#
# Pre-push hook: Validate only plugin files are tracked
# Blocks push if development files are found in Git
#

echo ""
echo "========================================"
echo "  Pre-Push Validation"
echo "========================================"
echo ""

# Run validation script
bash .build/validate-tracked-files.sh

VALIDATION_RESULT=$?

if [ $VALIDATION_RESULT -ne 0 ]; then
    echo ""
    echo "❌ PUSH BLOCKED!"
    echo ""
    echo "Development files detected in Git tracking."
    echo "Only plugin files should be pushed to GitHub."
    echo ""
    echo "Fix the issues above before pushing."
    echo ""
    echo "To bypass this check (NOT recommended):"
    echo "  git push --no-verify"
    echo ""
    exit 1
fi

echo ""
echo "✓ Validation passed. Proceeding with push..."
echo ""
exit 0
